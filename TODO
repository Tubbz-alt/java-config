For 3.0: rewrite java-config from scratch and stop patching it. this codebase
is old and needs to go away.
